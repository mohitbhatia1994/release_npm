var cli = require('./cli'),
    log = require('./log'),
    config = require('./config'),
    tasks = require('./tasks'),
    when = require('when'),
    semver = require('semver'),
    noop = when.resolve(true),
    shelljs = require('shelljs'),
    fs = require('fs');

function anotherInc() {
let version = JSON.parse(fs.readFileSync('version.json')).version;
    verions = semver.inc(version, "minor");
    str = JSON.stringify(eval('('+`{ 'version' : "${verions}" }`+')'));
    fs.writeFileSync('version.json' , str);
    shelljs.exec('git add .');
    shelljs.exec('git commit -m "another new verison"');
    shelljs.exec('git push');
}


function incrementtt() {

let version = JSON.parse(fs.readFileSync('version.json')).version;
verions = semver.inc(version, "minor"); 
console.log(version);
let str = JSON.stringify(eval('('+`{ 'version' : "${verions}" }`+')'));
fs.writeFileSync('version.json' , str);
    shelljs.exec('git add .');
    shelljs.exec('git tag v2.1.123');
    shelljs.exec('git push origin --tags');
    shelljs.exec('git commit -m "new verison"');
    shelljs.exec('git push'); 
    anotherInc();
}

//     function fromCli(options) {
//     return execute(cli.parse(options));
// }

// function execute(cliArgs) {

//     var options = config.mergeOptions(cliArgs);

//     if(cliArgs.version) {

//         cli.version();

//     } else if(cliArgs.help) {

//         cli.help();

//     } else {

//         if(options.force) {
//             log.warn('Using --force, I sure hope you know what you are doing.');
//         }

//         if(options.debug) {
//             require('when/monitor/console');
//         }

//         log.debugDir(options);

//         return tasks.run(options).catch(function(error) {

//             log.error(error);

//             if(options.debug) {
//                 throw error;
//             }

//         });
//     }

//     return noop;
// }

// module.exports = {
//     cli: fromCli,
//     execute: execute
// };

module.exports = {
    semver : incrementtt
};